<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
					   xmlns:s="library://ns.adobe.com/flex/spark"
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   width="800" height="600" backgroundColor="#FFFFFF"
					   preloaderChromeColor="#FFFFF"
					   title="AirMusic"
					   initialize="init_All();init_application();">
	<s:layout>
		<s:BasicLayout/>
	</s:layout>
	
	<fx:Script>
		<![CDATA[
			import mx.controls.Menu;
			import mx.core.UIComponent;
			import mx.events.FlexNativeWindowBoundsEvent;
			import mx.events.MenuEvent;
			
			[Bindable]
			public var init:ArrayList;
			
			[Bindable]
			public var initGen:ArrayList;
			
			[Bindable]
			public var initAlbum:ArrayList;
			
			[Bindable]
			public var initArtist:ArrayList;
			
			protected function init_application ()
			{
				var application:Application = Application.Instance;
			}
			
			protected function Play_clickHandler(event:MouseEvent):void
			{
				var player:Player = new Player ();
				var appli:Application = Application.Instance;
				appli._player.test();
			}
			
			protected function Stop_clickHandler(event:MouseEvent):void
			{
				var appli:Application = Application.Instance;
				appli._player.stop();
			}
			
			protected function myMenuBar_changeHandler(event:MenuEvent):void
			{
				// TODO Auto-generated method stub
				
			}
		
			protected function menuBar_clickHandler(event:MenuEvent):void
			{
				//trace ("event name" + event.item.@name);
				if (event.item.@name == "add")
				{
					var file_search:Filesearch = new Filesearch ();
				}
				
				if (event.item.@name == "genre")
				{
					test();
				}
				
				
			}
			
			public function test () : void
			{
				var change:Array = [{AlbumBase:'The blackening'}, {AlbumBase:'The black album'}, {AlbumBase:'The number beast'}];
			    
				initAlbum.removeAll();
				var array:ArrayList = new ArrayList (change);
				initAlbum = array;
			}
			
			
			public function init_All() : void
			{
				var app:Application = Application.Instance;
				
				app.display.fill_tab();
				initGen = new ArrayList(app.display.genreTab);
				init = new ArrayList(app.display.musicTab);
				initArtist= new ArrayList(app.display.artistTab);
				initAlbum = new ArrayList(app.display.albumTab);
			}
			
			
			protected function SpeekerLevel_changeHandler(event:Event):void
			{
				// TODO Auto-generated method stub
				
			}
			
			protected function Rewind_clickHandler(event:MouseEvent):void
			{
				var appli:Application = Application.Instance;
				appli._player.rewind();
			}
			
			protected function forwind_clickHandler(event:MouseEvent):void
			{
				var appli:Application = Application.Instance;
				appli._player.forward();
				
			}
			
			protected function ShuffleButton_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				
			}
			
			protected function RepeatButton_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				
			}
			
			protected function PlayProgress_changeHandler(event:Event):void
			{
				// TODO Auto-generated method stub
				
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Placer ici les éléments non visuels (services et objets de valeur, par exemple). -->
	</fx:Declarations>
	<s:VGroup width="100%" height="100%" verticalAlign="top">
		<s:HGroup id="MenuGroup" width="100%" height="3%">
			<mx:MenuBar id="myMenuBar" labelField="@label" itemClick="menuBar_clickHandler(event)">
				<fx:XMLList>
					<menuitem label="Fichier">
						<menuitem label="Ajouter un dossier" name="add"/>
						<menuitem label="Ouvrir un fichier" name="open"/>
						<menuitem label = "Creer une playlist"/>
						<menuitem label ="Importer une playlist"/>
					</menuitem>
					<menuitem label="test">
				    	<menuitem label="Add genre" name="genre"/>
						<menuitem label="Add Music" name="music"/>
					</menuitem>
				</fx:XMLList>
			</mx:MenuBar>
		</s:HGroup>
		<s:HGroup width="100%" height="85%">
			<s:VGroup id="InfoPlaylistGroup" width="30%" height="100%">
				<mx:Accordion width="100%" height="50%">
					<s:NavigatorContent width="100%" height="100%" label="Playlist1">
					</s:NavigatorContent>
					<s:NavigatorContent width="100%" height="100%" label="playlist2">
					</s:NavigatorContent>
					<s:NavigatorContent width="100%" height="100%" label="playlist3">
					</s:NavigatorContent>
				</mx:Accordion>
				<s:SWFLoader id="Econest_Image" width="100%" height="40%"/>
				<s:Label id="Name" fontFamily="Times New Roman" fontSize="22" text="Name"/>
				<s:Label id="ArtisteDisplay" text="Artiste"/>
				<s:Label id="AlbumInfo" text="Album"/>
			</s:VGroup>
			<s:Scroller width="70%" height="100%">
				<s:VGroup id="MusicGroup" width="100%" height="100%">
					<s:HGroup id="EasySearch" width="100%" height="35%">
						<s:DataGrid id="GenreTable" width="33%" height="100%" requestedRowCount="4" dataProvider="{initGen}">
							<s:columns>
								<s:ArrayList>
									<s:GridColumn dataField="GenreBase" headerText="Genre"></s:GridColumn>
								</s:ArrayList>
							</s:columns>
							
						</s:DataGrid>
						<s:DataGrid id="ArtistTable" width="33%" height="100%" requestedRowCount="4" dataProvider="{initArtist}">
							<s:columns>
								<s:ArrayList>
									<s:GridColumn dataField="ArtistBase" headerText="Artiste"></s:GridColumn>
							    </s:ArrayList>
							</s:columns>
						</s:DataGrid>
						<s:DataGrid id="AlbumTable" width="31%" height="100%" borderVisible="true"
									chromeColor="#DFDFDF" editable="true" requestedRowCount="4"
									selectionColor="#2E64AE" dataProvider="{initAlbum}">
							<s:columns>
								<s:ArrayList>
									<s:GridColumn dataField="AlbumBase" headerText="Album"></s:GridColumn>
								</s:ArrayList>
							</s:columns>
						</s:DataGrid>
					</s:HGroup>
					<s:DataGrid id="MusicTable" width="99%" height="65%" dataProvider="{init}">
						<s:columns>
							<s:ArrayList>
								<s:GridColumn dataField="TitleField" headerText="Titre"></s:GridColumn>
								<s:GridColumn dataField="ArtistField" headerText="Artiste"></s:GridColumn>
								<s:GridColumn dataField="AlbumField" headerText="Album"></s:GridColumn>
								<s:GridColumn dataField="GenreField" headerText="Genre"></s:GridColumn>
								<s:GridColumn dataField="LengthField" headerText="Durée"></s:GridColumn>
							</s:ArrayList>
						</s:columns>
					</s:DataGrid>
				</s:VGroup>
			</s:Scroller>
		</s:HGroup>
		<s:VGroup width="100%" height="20%">
			<s:VGroup id="ListeLecture" width="100%" height="70%" verticalAlign="top">
				<s:SWFLoader width="10%" height="80%"/>
				<s:HScrollBar width="100%"/>
			</s:VGroup>
			<s:HGroup id="PlayElement" width="100%" height="11%" verticalAlign="middle">
				<s:Button id="Rewind" y="20" width="25%" height="100%" label="Rewind"
						  click="Rewind_clickHandler(event)"/>
				<s:Button id="Play" y="20" width="25%" height="100%" label="Play"
						  click="Play_clickHandler(event)"/>
				<s:Button id="Stop" y="21" width="25%" height="100%" label="Stop"
						  click="Stop_clickHandler(event)"/>
				<s:Button id="forwind" y="19" width="25%" height="100%" label="Forwind"
						  click="forwind_clickHandler(event)"/>
				<s:Image id="SpeekerImage" width="10%" height="100%"/>
				<s:HSlider id="SpeekerLevel" width="71" change="SpeekerLevel_changeHandler(event)"/>
				<s:HSlider id="PlayProgress" width="60%" change="PlayProgress_changeHandler(event)"
						   skinClass="spark.skins.spark.HSliderSkin"/>
				<s:ToggleButton id="ShuffleButton" width="15%" height="100%" label="Shuffle"
								click="ShuffleButton_clickHandler(event)"/>
				<s:ToggleButton id="RepeatButton" width="15%" height="100%" label="Repeat"
								click="RepeatButton_clickHandler(event)"/>
			</s:HGroup>
		</s:VGroup>
	</s:VGroup>
</s:WindowedApplication>
